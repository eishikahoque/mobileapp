

<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Drawing Game</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">

<script>
	var zon = true; // set to false to turn off console messages from zim
	var zns = false; // set to true to require zim namespace - eg. new zim.Frame()
</script>
<script src="https://zimjs.org/cdn/1.2.4/createjs.js"></script>
<script src="https://zimjs.org/cdn/10.8.0/zim.js"></script>
<script src="https://zimjs.org/cdn/game_2.2.js"></script>
<script src="https://d309knd7es5f10.cloudfront.net/pizzazz_02.js"></script>


<script>

    const scaling = "full"; 
    const width = null;
    const height = null;
    const color = 'black'; 
    const outerColor = 'black'; 

    const frame = new Frame(scaling, width, height, color, outerColor);
    frame.on("ready", () => { 
        zog("ready from ZIM Frame"); 

        const stage = frame.stage;
        let stageW = frame.width;
        let stageH = frame.height;

        let wordChoices = ['Dinosaur', 'Dragon', 'Angry', 'Baby', 'Book', 'Butterfly', 'Crayon', ' Eiffel Tower', 'Fireworks', 'Flower', 'Giraffe', 'High Heels', 'Ice Cream', 'Lion', 'Pizza', 'Rainbow', 'Snowflake', 'Stawberry', 'Blueberry', 'Toothbrush', 'Truck', 'Brain', 'Castle', 'Computer', 'Circus Tent', 'Dumbbell', 'Ferris Wheel', 'Flag', ' Lipstick', 'Lobster', 'Lollipop', 'Mermaid', 'Music', 'Nurse', 'Owl', 'Piano', 'Playground', 'Apple Pie', 'Raindrop', 'Robot', 'Sprinkler', 'Telescope', 'Train', 'Tutu', 'Birthday', 'Blizzard', 'Burrito', 'Captain', 'Chandelier', 'Crib', 'Dance', 'Full Moon', 'Glue', 'Hockey', 'Hotel', 'Koala', 'Light', 'Mask', 'Mom', 'Dad', 'Photo', 'Pirate', 'Egg', ' Space', 'Tourist', 'Wifi', 'Canada', 'United States', 'Zombies', 'Basketball', 'Soccer', 'Golf', 'Scissors', 'Rock', 'Airplane', 'Anchor', 'Astronaut', 'Doctor', 'Christmas Tree', 'Dress', 'Apple', 'Banana', 'Grape', 'Bubbles', 'Cereal', 'Cloud', 'Superman', 'Batman', 'Iron Man', 'Easter', 'Halloween', 'Cricket', 'Spider', 'Moutain', 'Sofa', 'Chocolate', 'Bouquet', 'Picnic', 'Gas', 'Bike', 'Bed', 'Bell', 'Jellyfish', 'Kangaroo', 'Penguin', 'Jeans', 'Nails', 'Watermelon', 'Wind', 'Jungle', 'Diaper', 'Scream', 'Password', 'Vegetarian', 'Bagel', 'Taj Mahal', 'Injection', 'Black Hole', 'Corona Virus', 'Thermometer', 'DVD', 'TV', 'Gold Fish'];

        const defaultLabel = {
            size: '24',
            font: 'Playfair Display',
            color: '#fff',
        };

        const startLabel = new Label({
            ...defaultLabel,
            text: 'Start',
            color: '#840C43'
        });

        const instructionsBtn = new Label({
            ...defaultLabel,
            text: 'How to Play'
        });

        const backBtn = new Label({
            ...defaultLabel,
            text: 'Back',
            color: '#840C43'
        });

        const shuffleLabel = new Label({
            ...defaultLabel,
            text: 'Skip'
        });

        const playLabel = new Label({
            ...defaultLabel,
            text: 'Play',
            color: '#840C43'
        });

        // HOME PAGE 

        const home = new Container(stageW, stageH);
        home.backing = new Rectangle(home.width, home.height, '#840C43').addTo(home);
        home.startBtn = new Button({
            width: 250,
            height: 60,
            label: startLabel,
            backgroundColor: '#fff',
            rollBackgroundColor: '#F9F9F9',
            corner: 5
        }).center(home);

        home.instructionsBtn = new Button({
            width: 250,
            height: 60,
            label: instructionsBtn,
            backgroundColor: '#944B6D',
            rollBackgroundColor: '#944B6D',
            corner: 5
        }).center(home);

        home.startBtn.on("mousedown", () => { 
            pages.go(wordPage, "right");
        });

        home.instructionsBtn.on("mousedown", () => { 
            pages.go(instructionPage, "left");
        });
        
        // INSTRUCTIONS PAGE 

        const instructionPage = new Container(stageW, stageH);
        instructionPage.backing = new Rectangle(instructionPage.width, instructionPage.height, '#840C43').addTo(instructionPage);
        instructionPage.backBtn = new Button({
            width: 75,
            height: 60,
            label: backBtn,
            backgroundColor: '#fff',
            rollBackgroundColor: '#F9F9F9',
            corner: 5
        }).center(instructionPage);
        instructionPage.backBtn.on("mousedown", () => { 
            pages.go(home, "right");
        });

        // CHOOSE WORD PAGE

        const wordPage = new Container(stageW, stageH);
        wordPage.backing = new Rectangle(wordPage.width, wordPage.height, '#840C43').addTo(wordPage);

        let potentialWord = shuffle(wordChoices)[0];
        wordChoices = wordChoices.filter((word) => word !== potentialWord);
        wordPage.word = new Label({
            ...defaultLabel,
            text: potentialWord,
            size: 48,
            align: 'center'
        }).center(wordPage);
        
        wordPage.shuffleBtn = new Button({
            width: 130,
            height: 60,
            label: shuffleLabel,
            backgroundColor: '#141414',
            rollBackgroundColor: '#141414',
            corner: 5
        }).center(wordPage);

        wordPage.playBtn = new Button({
            width: 130,
            height: 60,
            label: playLabel,
            backgroundColor: '#fff',
            rollBackgroundColor: '#f9f9f9',
            corner: 5
        }).center(wordPage);

        wordPage.shuffleBtn.on("mousedown", () => {
            potentialWord = shuffle(wordChoices)[0];
            wordChoices = wordChoices.filter((word) => word !== potentialWord);
            wordPage.word.text = potentialWord;
            stage.update();
        });

        wordPage.playBtn.on("mousedown", () => { 
            pages.go(gamePage, "right");
            timerValue.start(15)

        });

        // GAME PAGE
        const gamePage = new Container(stageW, stageH).addTo(stage);       
        const header = new Container(gamePage.width, gamePage.height*.1).addTo(gamePage);
        
        // SCORE       
        let scoreValue = new Scorer({
            ... defaultLabel,
            align: 'center',
            width: 250,
            backgroundColor: '#840C43',
            size: 48,
        })
        .scaleTo(header, null, 50, 'both')
        .pos(0, 0, LEFT, CENTER, header);
        
        let score = new Label({
            ...defaultLabel,
            text: 'Score',
            size: 26,
        })
        .scaleTo(header, null, 50, 'both')
        .pos(10, 0, LEFT, CENTER, scoreValue);
        
        // TIMER
        let timerValue = new Timer({
            ... defaultLabel,
            width: 10,
            size: 36,
            startPaused: true,
            align: 'right',
            backgroundColor: '#840C43',
        })
        .scaleTo(header, null, 50, 'both')
        .pos(10,0, RIGHT, CENTER, header);
        
        timerValue.on('step', () => {
            if(timerValue.time <= 10) {
                timerValue.color = '#FF0000';
            }
        });
        
        timerValue.on('complete', () => {
            colorFooter.removeFrom(gamePage);
            pen.stop(gamePage);
            clearBtn.removeFrom(gamePage)
            calculateScoreFooter.pos(0, 20, CENTER, BOTTOM, gamePage);
        });
         
        // FOOTER 
        const colorFooter = new Container(gamePage.width, gamePage.height*.1).addTo(gamePage);
        
        // COLOR PICKER
        let colors = new ColorPicker({
            width: colorFooter.width,
            spacing: 4,
            colors: ['#FFF', '#ECE44A', '#F07811', '#FF014E', '#840C43', '#92C023', '#01B0D6', '#0C5684', '#A55ECC'],
            circles: true,
            cols: 9,
            
        })
        .scaleTo(colorFooter)
        .center(colorFooter)
        .change((e) => {
            pen.color = e.target.selectedColor;
        });

        const calculateScoreFooter = new Container(gamePage.width*.5, gamePage.height*.1);

        let successBtn = new Button({
            label: new  Label({ ...defaultLabel, text: 'Correct'}),
            corner: 5, 
            backgroundColor: '#840C43',
            rollBackgroundColor: '#840C43',
            width: 175, 
            height: 70
        }).pos(0, 0, RIGHT, CENTER, calculateScoreFooter);

        successBtn.on('click', () => {
            scoreValue + 1;
            pages.go(wordPage, 'down');
        });
        
        let incorrectBtn = new Button({
            label: new  Label({ ...defaultLabel, text: 'Incorrect'}),
            corner: 5, 
            backgroundColor: '#141414',
            rollBackgroundColor: '#141414',
            width: 175, 
            height: 70
        }).pos(0, 0, LEFT, CENTER, calculateScoreFooter);

        incorrectBtn.on('click', () => {
            scoreValue + 0
        });
        
        // CANVAS

        const clearBtn = new Button({
            label: new Label({ ...defaultLabel, text: 'Clear'}),
            corner: 5, 
            align: 'center',
            backgroundColor: 'black',
            rollBackgroundColor: 'black',
            width: 80,
            height: 50,
        }).pos(gamePage.width*.02, gamePage.height*.12, LEFT, TOP, gamePage)

        clearBtn.on('click', () => {
            pen.clear();
        });

        const pen = new Pen({
            size: 6,
            color: '#fff',
            draggable: false
        }).center(gamePage);

        // stop dragging

        const motionController = new MotionController({
            target: pen, 
            type: "pressmove",
            speed: 80,
            damp: 0.9,
        });



        // const scoreCalculatePage = new Container(stageW/2, stage/2);
        // scoreCalculatePage.backing = new Rectangle(scoreCalculatePage.width, scoreCalculatePage.height).center(scoreCalculatePage)

    // LAYOUT MANAGER
        
        const layoutManager = new LayoutManager();
        layoutManager.add(
            new Layout(gamePage,
            [
                { object: header, backgroundColor: '#840C43' }, 
                { object: colorFooter, backgroundColor: '#000' }
            ], 0, null, true, null, stage
        ));
        
        layoutManager.dispose();

        // TRANSITION FOR ALL PAGES 
        
        const pages = new Pages({
            pages: [
                {page: home, swipe:[wordPage, instructionPage, null, null]}, // swipe:["right", "left", "down", "up"]
                {page: wordPage, swipe:[gamePage, home,  null, null]},
                {page: instructionPage, swipe:[home, null,  null, null]},
                {page: gamePage, swipe:[null, null,  null, null]},
            ],
            transition: "slide"
        }).addTo();
        
        // const grid = new Grid(); 

        // RESIZE FRAME 
        
        frame.on("resize", () => {
            stageW = frame.width; 
            stageH = frame.height;

            // scaling home
            home.setBounds(stageW, stageH);
            home.backing.siz(stageW, stageH);
            home.startBtn.center().mov(0, 150);
            home.instructionsBtn.center().mov(0, 225);

            // scaling instructionPage
            instructionPage.setBounds(stageW, stageH);
            instructionPage.backing.siz(stageW, stageH);
            instructionPage.backBtn.loc(stageW*.1, stageH*.05);
            
            // scaling wordPage
            wordPage.setBounds(stageW, stageH);
            wordPage.backing.siz(stageW, stageH);
            wordPage.playBtn.center().mov(80, 100);
            wordPage.shuffleBtn.center().mov(-80, 100);
            wordPage.word.center().mov(0, -120);
            
            // scaling gamePage
            layoutManager.resize();
            gamePage.setBounds(stageW, stageH);
            
            // grid.resize();

            stage.update();
        });

        stage.update(); 

    }); 


</script>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

</head>

<body>
<!-- canvas with id="myCanvas" is made by zim Frame -->
</body>
</html>
